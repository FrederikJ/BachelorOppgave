@model IEnumerable<HovedOppgave.Models.User>


<h2>Bruker Oversikt</h2>
<br />

<script type="text/javascript">
    var asc1 = 1, asc2 = 1, asc3 = 1;

    window.onload = function () {
        var item = document.getElementById("items");
    }

    function sortTable(tbody, colnumber, asc) {
        var rows = tbody.rows,
            rlength = rows.length,
            arr = new Array(),
            i, j, cells, clen;
        for (i = 0; i < rlength; i++) {
            cells = rows[i].cells;
            clen = cells.length;
            arr[i] = new Array();
            for (j = 0; j < clen; j++) {
                arr[i][j] = cells[j].innerHTML;
            }
        }
        arr.sort(function (a, b) {
            return (a[colnumber] == b[colnumber]) ? 0 : ((a[colnumber] > b[colnumber]) ? asc : -1 * asc);
        });
        for (i = 0; i < rlength; i++) {
            rows[i].innerHTML = "<td>" + arr[i].join("</td><td>") + "</td>";
        }
    }
</script>
<script type="text/javascript">
    window.onload = function () {
        var item = document.getElementById("thead");
    }
    function getColName(thead) {
        var rows = thead.rows, i;
        for (i = 0; i < rows.length; i++) {
            rows[i].innerHTML = "<li><a>" + rows.tr.childNodes.th.childNodes.text.data + "</a></li>"
        }
    }
</script>
<script type="text/javascript" src="~/Scripts/jquery-2.1.3.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        listBlogs(function (Search) {
            var searchstr = searchString.textContent;

            strPost += "<div>" + "<a href='Home/SearchEngine/" + searchstr + "'></a>" + "&nbsp"
        });
        function listBlogs(callback) {
            var url = document.URL.split('/');
            var id = url.pop();
            $.ajax({
                url: "/api/BlogApi/" + id,
                data: {},
                type: "GET",
                contentType: "application/json;charset=utf-8",
            }).then(function (Posts) {
                callback(Posts);
            });
        };
    });
</script>
<div class="form-group">
    <div class="col-lg-offset-4">
        <input type="text" class="form-control" placeholder="Søkefelt" id="searchString" onkeypress="listBlogs()"/>
    </div>
</div>
<br />
<div class="col-lg-offset-5">
    <div class="dropdown">
        <button class="btn btn-default dropdown-toggle" onclick="getColName(thead)" type="button" id="menu" data-toggle="dropdown">
            Kolonner
            <span class="caret"></span>
        </button> 
        <ul class="dropdown-menu" role="menu" aria-labelledby="menu1" >

        </ul>
    </div>
</div>
<br />
<table class="table">
    <thead id="thead">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.FirstName)
                <button type="button" class="btn btn-xs" aria-label="Left Align" onclick="sortTable(items, 0, asc1); asc1 *= -1; asc2 *= 1; asc3 *= 1;">
                    <span class="glyphicon glyphicon-arrow-down"></span>
                </button>
            </th>
            <th>
                @Html.DisplayNameFor(model => model.SurName)
                <button type="button" class="btn btn-xs" aria-label="Left Align" onclick="sortTable(items, 1, asc1); asc1 *= -1; asc2 *= 1; asc3 *= 1;">
                    <span class="glyphicon glyphicon-arrow-down"></span>
                </button>
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Email)
                <button type="button" class="btn btn-xs" aria-label="Left Align" onclick="sortTable(items, 2, asc1); asc1 *= -1; asc2 *= 1; asc3 *= 1;">
                    <span class="glyphicon glyphicon-arrow-down"></span>
                </button>
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PhoneNumber)
                <button type="button" class="btn btn-xs" aria-label="Left Align" onclick="sortTable(items, 3, asc1); asc1 *= -1; asc2 *= 1; asc3 *= 1;">
                    <span class="glyphicon glyphicon-arrow-down"></span>
                </button>
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Adress)
                <button type="button" class="btn btn-xs" aria-label="Left Align" onclick="sortTable(items, 4, asc1); asc1 *= -1; asc2 *= 1; asc3 *= 1;">
                    <span class="glyphicon glyphicon-arrow-down"></span>
                </button>
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Postalcode)
                <button type="button" class="btn btn-xs" aria-label="Left Align" onclick="sortTable(items, 5, asc1); asc1 *= -1; asc2 *= 1; asc3 *= 1;">
                    <span class="glyphicon glyphicon-arrow-down"></span>
                </button>
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PostalPlace)
                <button type="button" class="btn btn-xs" aria-label="Left Align" onclick="sortTable(items, 6, asc1); asc1 *= -1; asc2 *= 1; asc3 *= 1;">
                    <span class="glyphicon glyphicon-arrow-down"></span>
                </button>
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody id="items">
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.FirstName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.SurName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Email)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.PhoneNumber)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Adress)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Postalcode)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.PostalPlace)
                </td>
                <td>
                    @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                    @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                    @Html.ActionLink("Delete", "Delete", new { id = item.Id })
                </td>
            </tr>
        }
    </tbody>
</table>